:root {
  --bg-sunrise-a:#d95a85;
  --bg-sunrise-b:#ef8fb0;
  --bg-sunrise-c:#ef8fb0;
  --haze-strong:rgba(255,255,255,.34);
  --haze-soft:rgba(255,255,255,.16);
  --haze-none:rgba(255,255,255,0);
  --surface:rgba(255,255,255,.20);
  --surface-strong:rgba(255,255,255,.28);
  --surface-border:rgba(255,255,255,.38);
  --surface-inner:rgba(255,255,255,.52);
  --text-main:rgba(255,255,255,.98);
  --text-secondary:rgba(255,255,255,.84);
  --text-tertiary:rgba(255,255,255,.76);
  --shadow-deep:rgba(86,24,46,.30);
  --shadow-mid:rgba(90,30,52,.20);
  --shadow-soft:rgba(78,25,48,.14);
  --digit-shadow:rgba(72,22,40,.24);
  --panel-bg-strong:rgba(198,85,127,.94);
  --panel-bg-soft:rgba(222,112,149,.94);
  --panel-overlay:rgba(217,90,133,.99);
  --panel-border:rgba(255,255,255,.42);
  --panel-divider:rgba(255,255,255,.24);
  --button-bg:rgba(255,255,255,.20);
  --button-bg-hover:rgba(255,255,255,.30);
  --button-border:rgba(255,255,255,.55);
  --status-ok:rgba(233,255,240,.96);
  --status-error:rgba(255,232,239,.96);
  --input-bg:rgba(255,255,255,.95);
  --input-text:rgba(79,27,49,.98);
  --card-blur:14px;
  --duration-in:700ms;
  --duration-stagger:900ms;
  --easing:cubic-bezier(.2,.7,.2,1);
}

html,
body {
  height:100%;
  margin:0;
}

body {
  font-family:"Sora","Avenir Next","Trebuchet MS",sans-serif;
  color:var(--text-main);
  background:
    radial-gradient(120% 120% at 50% 8%, var(--haze-strong) 0%, var(--haze-none) 52%),
    radial-gradient(90% 70% at 85% 82%, var(--haze-soft) 0%, var(--haze-none) 62%),
    linear-gradient(145deg, var(--bg-sunrise-a) 0%, var(--bg-sunrise-b) 46%, var(--bg-sunrise-c) 100%);
  display:grid;
  place-items:center;
  padding:clamp(16px,4vw,40px);
  box-sizing:border-box;
  overflow:hidden;
}

body::before,
body::after {
  content:"";
  position:fixed;
  border-radius:50%;
  pointer-events:none;
  z-index:0;
  filter:blur(clamp(24px,5vw,40px));
}

body::before {
  width:clamp(220px,30vw,420px);
  aspect-ratio:1;
  top:clamp(-90px,-8vw,-30px);
  left:clamp(-80px,-6vw,0px);
  background:radial-gradient(circle at 40% 40%, var(--haze-strong) 0%, var(--haze-none) 70%);
}

body::after {
  width:clamp(220px,28vw,380px);
  aspect-ratio:1;
  right:clamp(-90px,-8vw,-30px);
  bottom:clamp(-100px,-10vw,-40px);
  background:radial-gradient(circle at 50% 50%, var(--haze-soft) 0%, var(--haze-none) 72%);
}

body.embed-mode {
  background:transparent;
  padding:0;
  overflow:visible;
}

body.embed-mode::before,
body.embed-mode::after {
  display:none;
}

body.embed-mode .layout {
  width:100%;
  max-width:none;
}

.layout {
  width:min(100%,960px);
  position:relative;
  z-index:1;
}

.card {
  width:100%;
  display:grid;
  gap:clamp(8px,1.8vw,16px);
  padding:clamp(20px,3.8vw,34px) clamp(18px,3.6vw,32px) clamp(16px,3vw,26px);
  border-radius:clamp(22px,3vw,34px);
  background:linear-gradient(160deg, var(--surface) 0%, var(--surface-strong) 100%);
  border:1px solid var(--surface-border);
  box-shadow:
    0 clamp(18px,3vw,34px) clamp(40px,8vw,72px) var(--shadow-deep),
    0 8px 20px var(--shadow-mid),
    inset 0 1px 0 var(--surface-inner);
  backdrop-filter:blur(var(--card-blur));
  -webkit-backdrop-filter:blur(var(--card-blur));
  box-sizing:border-box;
  position:relative;
  isolation:isolate;
  overflow:hidden;
  animation:card-in var(--duration-in) var(--easing) both;
}

body.embed-mode .card {
  border-color:var(--panel-border);
  background:linear-gradient(145deg, var(--bg-sunrise-a) 0%, var(--bg-sunrise-b) 46%, var(--bg-sunrise-c) 100%);
  backdrop-filter:none;
  -webkit-backdrop-filter:none;
  box-shadow:0 12px 26px var(--shadow-mid), inset 0 1px 0 var(--surface-inner);
}

body.embed-mode .card::after {
  display:none;
}

.card::after {
  content:"";
  position:absolute;
  inset:1px;
  border-radius:inherit;
  background:linear-gradient(180deg, var(--haze-soft) 0%, var(--haze-none) 35%);
  z-index:-1;
}

.title {
  margin:0;
  text-align:center;
  color:var(--text-secondary);
  font-weight:700;
  font-size:clamp(13px,1.5vw,18px);
  letter-spacing:.06em;
  text-wrap:balance;
  animation:fade-up var(--duration-stagger) var(--easing) both;
}

.digits {
  margin:0;
  text-align:center;
  color:var(--text-main);
  font-weight:800;
  line-height:.95;
  font-variant-numeric:tabular-nums;
  font-size:clamp(44px,9.8vw,138px);
  letter-spacing:.02em;
  text-shadow:0 10px 26px var(--digit-shadow);
  user-select:none;
  animation:fade-up var(--duration-stagger) var(--easing) 90ms both;
}

.units {
  margin:0;
  display:grid;
  grid-template-columns:repeat(4, minmax(0, 1fr));
  gap:clamp(6px,1.8vw,24px);
  text-align:center;
  color:var(--text-tertiary);
  font-weight:700;
  font-size:clamp(10px,1.2vw,13px);
  letter-spacing:.16em;
  user-select:none;
  animation:fade-up var(--duration-stagger) var(--easing) 170ms both;
}

.units span {
  opacity:.96;
}

.config-trigger {
  position:absolute;
  top:clamp(10px,2vw,16px);
  right:clamp(10px,2vw,16px);
  width:36px;
  height:36px;
  border:1px solid var(--button-border);
  border-radius:999px;
  background:var(--button-bg);
  color:var(--text-main);
  display:none;
  place-items:center;
  padding:0;
  cursor:pointer;
  z-index:3;
}

.card.can-edit .config-trigger {
  display:grid;
}

.config-trigger:hover,
.config-close:hover {
  background:var(--button-bg-hover);
}

.config-trigger:focus-visible,
.config-close:focus-visible,
.save-button:focus-visible,
.config-input:focus-visible,
.color-field input:focus-visible {
  outline:2px solid var(--text-main);
  outline-offset:2px;
}

.config-trigger svg,
.config-close svg {
  width:16px;
  height:16px;
}

.config-trigger path,
.config-close path {
  fill:none;
  stroke:currentColor;
  stroke-width:2.2;
  stroke-linecap:round;
}

.config-panel {
  position:absolute;
  inset:0;
  border-radius:inherit;
  padding:clamp(18px,3.2vw,28px);
  box-sizing:border-box;
  display:grid;
  align-content:start;
  gap:10px;
  background:linear-gradient(160deg, var(--panel-bg-soft) 0%, var(--panel-overlay) 100%);
  border:1px solid var(--panel-border);
  z-index:4;
  opacity:0;
  visibility:hidden;
  pointer-events:none;
  max-height:100%;
  overflow-y:auto;
  overscroll-behavior:contain;
  transform:translateY(8px);
  transition:opacity 200ms var(--easing), transform 200ms var(--easing), visibility 0ms linear 200ms;
}

.config-panel.is-open {
  opacity:1;
  visibility:visible;
  pointer-events:auto;
  transform:translateY(0);
  transition:opacity 200ms var(--easing), transform 200ms var(--easing), visibility 0ms;
}

.config-close {
  position:absolute;
  top:10px;
  right:10px;
  width:32px;
  height:32px;
  display:grid;
  place-items:center;
  border:1px solid var(--button-border);
  border-radius:999px;
  background:var(--button-bg);
  color:var(--text-main);
  padding:0;
  cursor:pointer;
}

.config-title {
  margin:0;
  padding-right:36px;
  font-size:clamp(18px,2.4vw,24px);
  letter-spacing:.03em;
}

.config-label {
  font-size:12px;
  font-weight:700;
  letter-spacing:.08em;
  color:var(--text-secondary);
}

.config-input {
  width:100%;
  box-sizing:border-box;
  border:1px solid var(--panel-border);
  border-radius:12px;
  background:var(--input-bg);
  color:var(--input-text);
  padding:10px 12px;
  font:inherit;
  font-size:14px;
  font-weight:700;
}

.color-grid {
  margin-top:2px;
  padding-top:8px;
  border-top:1px solid var(--panel-divider);
  display:grid;
  grid-template-columns:repeat(2, minmax(0,1fr));
  gap:10px;
}

.color-field {
  display:grid;
  gap:6px;
  font-size:11px;
  letter-spacing:.08em;
  color:var(--text-secondary);
}

.color-field input {
  width:100%;
  height:34px;
  border:1px solid var(--panel-border);
  border-radius:10px;
  background:var(--input-bg);
  padding:4px;
  box-sizing:border-box;
  cursor:pointer;
}

.save-status {
  min-height:1em;
  margin:2px 0 0;
  font-size:12px;
  letter-spacing:.03em;
  color:var(--text-main);
}

.save-status.ok {
  color:var(--status-ok);
}

.save-status.error {
  color:var(--status-error);
}

.save-button {
  margin-top:2px;
  width:100%;
  border:1px solid var(--panel-border);
  border-radius:12px;
  background:var(--button-bg);
  color:var(--text-main);
  font:inherit;
  font-size:14px;
  font-weight:700;
  letter-spacing:.04em;
  padding:10px 12px;
  cursor:pointer;
}

.save-button:disabled {
  opacity:.5;
  cursor:not-allowed;
}

@keyframes card-in {
  from {
    opacity:0;
    transform:translateY(clamp(12px,2vw,20px)) scale(.98);
  }
  to {
    opacity:1;
    transform:translateY(0) scale(1);
  }
}

@keyframes fade-up {
  from {
    opacity:0;
    transform:translateY(clamp(8px,1.5vw,14px));
  }
  to {
    opacity:1;
    transform:translateY(0);
  }
}

@media (max-width:520px) {
  body {
    padding:clamp(14px,4vw,20px);
  }

  .card {
    padding:clamp(16px,6vw,22px) clamp(14px,5vw,20px);
    border-radius:clamp(18px,6vw,24px);
    gap:clamp(6px,2vw,10px);
  }

  .title {
    letter-spacing:.04em;
  }

  .digits {
    letter-spacing:.01em;
  }

  .units {
    gap:clamp(5px,2vw,10px);
    letter-spacing:.11em;
  }

  .config-trigger {
    width:34px;
    height:34px;
  }

  .config-panel {
    padding:14px;
    gap:7px;
  }

  .config-title {
    font-size:18px;
  }

  .color-grid {
    grid-template-columns:1fr;
    gap:7px;
  }

  .save-button,
  .config-input {
    font-size:13px;
  }
}

@media (prefers-reduced-motion:reduce) {
  .card,
  .title,
  .digits,
  .units {
    animation:none;
  }
}
